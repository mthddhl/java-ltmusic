"use strict";(self["webpackChunkcli"]=self["webpackChunkcli"]||[]).push([[216],{1626:function(e,t,n){n.d(t,{aF:function(){return ie},MI:function(){return C},g9:function(){return y},CW:function(){return w},Ff:function(){return z},fl:function(){return f},H3:function(){return k},TG:function(){return Y},Tb:function(){return m},Ml:function(){return x},YT:function(){return E},iZ:function(){return R},dy:function(){return q},sI:function(){return v},W:function(){return M},W_:function(){return p},A4:function(){return J},ct:function(){return K},h7:function(){return _},uw:function(){return ne},JM:function(){return Z},V8:function(){return ee},Jd:function(){return V},V2:function(){return te},Gr:function(){return $},Fx:function(){return O},Si:function(){return T},n1:function(){return G},hb:function(){return c},Jb:function(){return N},_C:function(){return oe},FO:function(){return W},cQ:function(){return j},TF:function(){return l},av:function(){return b},nM:function(){return H},o5:function(){return P},iA:function(){return F},WN:function(){return S},mT:function(){return se},u9:function(){return X},QK:function(){return Q},Xv:function(){return A},l1:function(){return B},kL:function(){return U},VV:function(){return d},OD:function(){return h},Xt:function(){return L},Hu:function(){return g},A6:function(){return I},xB:function(){return u},nd:function(){return D}});var o=n(9669),s=n.n(o),i=(n(8341),n(5244));function r(e,t={}){return new Promise(((n,o)=>{s().get(e,{params:t,headers:{Authorization:localStorage.getItem("token")}}).then((e=>{n(e.data)})).catch((e=>{o(e)}))}))}function a(e,t={}){return new Promise(((n,o)=>{s().post(e,t,{headers:{Authorization:localStorage.getItem("token")}}).then((e=>{n(e.data)})).catch((e=>{o(e)}))}))}s().defaults.timeout=5e3,s().defaults.withCredentials=!0,s().defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",s().defaults.baseURL="http://192.168.0.105",s().interceptors.response.use((e=>200===e.status?Promise.resolve(e):Promise.reject(e)),(e=>{if(e.response.status){switch(e.response.status){case 401:localStorage.setItem("token",""),localStorage.setItem("consumer",""),i.z8.error(e.response.data.errorMsg);break;case 403:localStorage.setItem("token",""),localStorage.setItem("consumer",""),i.z8.error(e.response.data.errorMsg);break;case 404:break}return Promise.reject(e.response)}}));const l=()=>r("/songList/getPartSongList"),u=e=>r("/listSong/songforSongListGetAll",e),d=e=>r("/songList/songListGetById",e),c=e=>r("/songList/getLikeSongList",e),g=e=>r("/songList/songListGetSongsCountIncr",e),p=e=>r("/songList/consumerLikeSongList",e),m=e=>r("/songList/consumerGetLikeSingList",e),f=e=>r("songList/consumerDeleteLikeSongList",e),h=e=>r("/songList/songListGetByLetter",e),L=e=>r("/songList/songListGetCountByLetter",e),S=e=>r("/songList/getTogetLikedSongList",e),w=e=>a("/songList/consumerCreatedSongList",e),k=e=>r("/songList/consumerGetCreatedSongList",e),y=e=>r("/listSong/consumerAddSongToSongList",e),C=e=>r("/songList/consumerAddSongGetSongList",e),I=e=>a("/songList/songListUpdate",e),_=e=>r("/listSong/consumerUpdateSongListSongs",e),W=()=>r("/singer/getPartSinger"),U=e=>r("/song/getAllList",e),b=e=>r("/singer/getSingerById",e),V=e=>r("/song/getAllList",e),P=e=>r("/song/getSongPage",e),v=e=>r("/singer/consumerLikeSinger",e),x=e=>r("/singer/consumerGetLikeSinger",e),z=e=>r("/singer/consumerDeleteLikeSinger",e),A=e=>r("/singer/singerGetByLetter",e),B=e=>r("/singer/singerGetCountByLetter",e),G=e=>r("singer/getLikeSinger",e),F=e=>r("singer/getTogetLikedSingers",e),j=()=>r("/song/getPartSong"),H=e=>r("/song/getSongBySongListIdPage",e),M=e=>r("/song/consumerLikeSong",e),T=e=>r("/song/getConsumerLikeSong",e),D=e=>a("/songListComment/subComments",e),O=e=>r("/songListComment/getCommentsBySongListId",e),$=e=>r("/songListComment/getCommentCount",e),q=e=>r("/songListComment/likeOfConsumer",e),N=e=>a("/loginController/login",e),J=()=>r("/loginController/consumerLogout"),R=()=>r("/loginController/consumerIsLogin"),Y=e=>r("/consumer/consumerGetInfo",e),E=e=>a("/consumer/consumerInsert",e),K=e=>a("/consumer/consumerUpdate",e),Q=e=>r("/search/searchGetAll",e),X=e=>r("/search/searchContent",e),Z=e=>r("/search/fileIsExist",e),ee=()=>r("/carousel/getAllCarousel"),te=()=>r("/product/getAllVIPProduct"),ne=e=>r("/aliPayApi/createdOrder",e),oe=()=>r("/order/getOrderByConId"),se=e=>r("/order/payOrderByOrderNo",e),ie=e=>r("/order/closeOrderByOrderNo",e)},6216:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var o=n(6252),s=n(3577);const i=e=>((0,o.dD)("data-v-e64bcbe6"),e=e(),(0,o.Cn)(),e),r={key:0,style:{"margin-top":"20px","margin-left":"30px"}},a=(0,o.Uk)("创建歌单"),l={class:"space"},u=["onClick"],d={class:"content"},c={class:"count"},g=(0,o.Uk)("播放"),p=(0,o.Uk)("删除歌单"),m=(0,o.Uk)("修改歌单"),f=(0,o.Uk)("管理歌曲"),h=i((()=>(0,o._)("div",{style:{height:"15px"}},null,-1))),L={style:{color:"#000000"}},S=(0,o.Uk)("上传图片"),w=i((()=>(0,o._)("div",{class:"el-upload__tip"}," jpg/png 大小不能超过2M ",-1))),k={class:"dialog-footer"},y=(0,o.Uk)("取消"),C=(0,o.Uk)("提交"),I=(0,o.Uk)("上传图片"),_=i((()=>(0,o._)("div",{class:"el-upload__tip"}," jpg/png 大小不能超过2M ",-1))),W={class:"dialog-footer"},U=(0,o.Uk)("取消"),b=(0,o.Uk)("提交"),V={class:"dialog-footer"},P=(0,o.Uk)("取消"),v=(0,o.Uk)("确定");function x(e,t,n,i,x,z){const A=(0,o.up)("el-button"),B=(0,o.up)("Headset"),G=(0,o.up)("el-icon"),F=(0,o.up)("el-col"),j=(0,o.up)("MoreFilled"),H=(0,o.up)("el-dropdown-item"),M=(0,o.up)("el-dropdown-menu"),T=(0,o.up)("el-dropdown"),D=(0,o.up)("el-row"),O=(0,o.up)("el-space"),$=(0,o.up)("el-input"),q=(0,o.up)("el-form-item"),N=(0,o.up)("el-upload"),J=(0,o.up)("el-form"),R=(0,o.up)("el-dialog"),Y=(0,o.up)("el-table-column"),E=(0,o.up)("el-table");return(0,o.wg)(),(0,o.iD)(o.HY,null,[x.isPerson?((0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(A,{onClick:t[0]||(t[0]=e=>x.isCreated=!0)},{default:(0,o.w5)((()=>[a])),_:1})])):(0,o.kq)("",!0),(0,o._)("div",l,[(0,o.Wm)(O,{fill:!1,wrap:"","fill-ratio":50,size:40},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(x.songList,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:e,class:"box-card"},[(0,o._)("div",{class:"box",style:(0,s.j5)({backgroundImage:`url(${this.$store.state.httpFileUrl+e.pic})`})},[(0,o._)("div",{class:"link",onClick:t=>z.jump(e.id)},null,8,u),(0,o._)("div",d,[(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o.Wm)(F,{span:4},{default:(0,o.w5)((()=>[(0,o.Wm)(G,{class:"headset"},{default:(0,o.w5)((()=>[(0,o.Wm)(B)])),_:1})])),_:1}),(0,o.Wm)(F,{span:17,style:{"margin-top":"4px","margin-left":"-5px"}},{default:(0,o.w5)((()=>[(0,o._)("span",c,(0,s.zw)(z.initNum(e.count)),1)])),_:2},1024),(0,o.Wm)(F,{span:3,style:{"margin-top":"8px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{trigger:"click"},{dropdown:(0,o.w5)((()=>[(0,o.Wm)(M,null,{default:(0,o.w5)((()=>[(0,o.Wm)(H,{onClick:t=>z.play(e)},{default:(0,o.w5)((()=>[g])),_:2},1032,["onClick"]),this.isPerson?((0,o.wg)(),(0,o.j4)(H,{key:0,onClick:n=>z.deleteSongList(e,t)},{default:(0,o.w5)((()=>[p])),_:2},1032,["onClick"])):(0,o.kq)("",!0),this.isPerson?((0,o.wg)(),(0,o.j4)(H,{key:1,onClick:t=>z.update(e)},{default:(0,o.w5)((()=>[m])),_:2},1032,["onClick"])):(0,o.kq)("",!0),this.isPerson?((0,o.wg)(),(0,o.j4)(H,{key:2,onClick:t=>z.managerSongs(e)},{default:(0,o.w5)((()=>[f])),_:2},1032,["onClick"])):(0,o.kq)("",!0)])),_:2},1024)])),default:(0,o.w5)((()=>[(0,o.Wm)(G,{class:"playIcon"},{default:(0,o.w5)((()=>[(0,o.Wm)(j)])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024)])],4),h,(0,o._)("div",null,[(0,o._)("span",L,(0,s.zw)(e.title),1)])])))),128))])),_:1})]),(0,o.Wm)(R,{modelValue:x.isCreated,"onUpdate:modelValue":t[5]||(t[5]=e=>x.isCreated=e),title:"Tips",width:"30%"},{footer:(0,o.w5)((()=>[(0,o._)("span",k,[(0,o.Wm)(A,{onClick:t[4]||(t[4]=e=>x.isCreated=!1)},{default:(0,o.w5)((()=>[y])),_:1}),(0,o.Wm)(A,{type:"primary",onClick:z.submit},{default:(0,o.w5)((()=>[C])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(J,{ref:"SongListInput","label-width":"80px"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{label:"歌单名"},{default:(0,o.w5)((()=>[(0,o.Wm)($,{modelValue:x.SongListInput.title,"onUpdate:modelValue":t[1]||(t[1]=e=>x.SongListInput.title=e),nameplaceholder:"歌单标题",size:"mini"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(q,{label:"歌单介绍"},{default:(0,o.w5)((()=>[(0,o.Wm)($,{placeholder:"歌单介绍",modelValue:x.SongListInput.introduction,"onUpdate:modelValue":t[2]||(t[2]=e=>x.SongListInput.introduction=e),type:"textarea"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(q,{label:"歌单风格"},{default:(0,o.w5)((()=>[(0,o.Wm)($,{placeholder:"请输入歌单风格",modelValue:x.SongListInput.style,"onUpdate:modelValue":t[3]||(t[3]=e=>x.SongListInput.style=e),type:"textarea"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(N,{class:"upload-demo",action:"",multiple:"","on-change":z.changeFile,"before-upload":z.beforeAvatorUpload,limit:1,"auto-upload":!1},{tip:(0,o.w5)((()=>[w])),default:(0,o.w5)((()=>[(0,o.Wm)(A,{type:"primary"},{default:(0,o.w5)((()=>[S])),_:1})])),_:1},8,["on-change","before-upload"])])),_:1},512)])),_:1},8,["modelValue"]),(0,o.Wm)(R,{modelValue:x.isUpdate,"onUpdate:modelValue":t[10]||(t[10]=e=>x.isUpdate=e),title:"Tips",width:"30%"},{footer:(0,o.w5)((()=>[(0,o._)("span",W,[(0,o.Wm)(A,{onClick:t[9]||(t[9]=e=>x.isUpdate=!1)},{default:(0,o.w5)((()=>[U])),_:1}),(0,o.Wm)(A,{type:"primary",onClick:z.updateSubmit},{default:(0,o.w5)((()=>[b])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(J,{ref:"SongListInput","label-width":"80px"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{label:"歌单名"},{default:(0,o.w5)((()=>[(0,o.Wm)($,{modelValue:x.updateSongList.title,"onUpdate:modelValue":t[6]||(t[6]=e=>x.updateSongList.title=e),nameplaceholder:"歌单标题",size:"mini"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(q,{label:"歌单介绍"},{default:(0,o.w5)((()=>[(0,o.Wm)($,{placeholder:"歌单介绍",modelValue:x.updateSongList.introduction,"onUpdate:modelValue":t[7]||(t[7]=e=>x.updateSongList.introduction=e),type:"textarea"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(q,{label:"歌单风格"},{default:(0,o.w5)((()=>[(0,o.Wm)($,{placeholder:"请输入歌单风格",modelValue:x.updateSongList.style,"onUpdate:modelValue":t[8]||(t[8]=e=>x.updateSongList.style=e),type:"textarea"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(N,{class:"upload-demo",action:"",multiple:"","on-change":z.changeFile,"before-upload":z.beforeAvatorUpload,limit:1,"auto-upload":!1},{tip:(0,o.w5)((()=>[_])),default:(0,o.w5)((()=>[(0,o.Wm)(A,{type:"primary"},{default:(0,o.w5)((()=>[I])),_:1})])),_:1},8,["on-change","before-upload"])])),_:1},512)])),_:1},8,["modelValue"]),(0,o.Wm)(R,{modelValue:x.isUpdateSongs,"onUpdate:modelValue":t[12]||(t[12]=e=>x.isUpdateSongs=e),title:"Tips",width:"50%"},{footer:(0,o.w5)((()=>[(0,o._)("span",V,[(0,o.Wm)(A,{onClick:t[11]||(t[11]=e=>x.isUpdateSongs=!1)},{default:(0,o.w5)((()=>[P])),_:1}),(0,o.Wm)(A,{type:"primary",onClick:z.updateSongs},{default:(0,o.w5)((()=>[v])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(E,{data:x.songs,style:{width:"100%"},onSelectionChange:z.handleSelectChange1},{default:(0,o.w5)((()=>[(0,o.Wm)(Y,{prop:"name",label:"歌曲名",width:"330"}),(0,o.Wm)(Y,{width:"50",align:"center",type:"selection"})])),_:1},8,["data","onSelectionChange"])])),_:1},8,["modelValue"])],64)}var z=n(1626),A=n(5244),B=n(9669),G=n.n(B),F={name:"",data(){return{isCreated:!1,songList:[],consumerId:-1,isPerson:!1,loginAndP:!1,currentState:"全部",type:{color:"rgba(255,0,0,0.97)"},SongListInput:{},file:null,updateSongList:{},isUpdate:!1,isUpdateSongs:!1,songs:[],songsHasSelectIds:[],updateSongListId:-1}},methods:{handleSelectChange1(e){this.songsHasSelectIds=[],e.map((e=>{this.songsHasSelectIds.push(e.songId)}))},updateSongs(){let e=new URLSearchParams;e.append("songListId",this.updateSongListId),e.append("songs",this.songsHasSelectIds),(0,z.h7)(e).then((e=>{e.success?(A.z8.success(e.data),this.isUpdateSongs=!1):A.z8.error(e.errorMsg)}))},managerSongs(e){this.isPerson?(0,z.xB)({songListId:e.id}).then((t=>{t.success&&(this.songs=t.data,this.updateSongListId=e.id,this.isUpdateSongs=!0)})):A.z8.error("未登录，不能管理歌单")},updateSubmit(){let e="application/json",t=new URLSearchParams;null!==this.file&&(t=new FormData,e="multipart/form-data",t.append("file",this.file.raw)),t.append("id",this.updateSongList.id),t.append("title",this.updateSongList.title),t.append("introduction",this.updateSongList.introduction),t.append("style",this.updateSongList.style),t.append("pic",this.updateSongList.pic),(0,z.A6)(t).then((e=>{e.success?(A.z8.success(e.data),this.init()):A.z8.error(e.errorMsg)})),this.isUpdate=!1},update(e){this.isPerson?(this.updateSongList.id=e.id,this.updateSongList.title=e.title,this.updateSongList.introduction=e.introduction,this.updateSongList.style=e.style,this.updateSongList.pic=e.pic,this.isUpdate=!0):A.z8.error("未登录，不能修改歌单")},submit(){let e="application/x-www-form-urlencoded;charset=utf-8",t=new URLSearchParams;null!==this.file&&(t=new FormData,e="multipart/form-data",t.append("file",this.file.raw)),t.append("title",this.SongListInput.title),t.append("introduction",this.SongListInput.introduction),t.append("style",this.SongListInput.style),(0,z.CW)(t).then((e=>{e.success?(A.z8.success(e.data),(0,z.H3)({id:this.consumerId}).then((e=>{e.success&&(this.songList=e.data)}))):A.z8.success(e.errorMsg)})),this.file=null,this.SongListInput={},this.isCreated=!1},changeFile(e){this.file=e},beforeAvatorUpload(e){return"image/jpeg"!==e.type?(this.$notify.error("格式错误"),!1):e.size/1024/1024<2||(this.$notify.error("文件大小错误"),!1)},jump(e){this.$router.push({path:"/songList",query:{id:e}})},deleteSongList(e,t){let n=e.id;G().get("/songList/songListDeleteById",{params:{id:n}}).then((e=>{e.data.success?(A.z8.success("删除成功"),this.songList.splice(t,1)):A.z8.error(e.data)}))},play(e){(0,z.xB)({songListId:e.id}).then((t=>{if(t.success){if(0===t.data.length)return void A.z8.error("歌单无歌曲");let n=[];t.data.forEach((e=>{e.isVip&&!this.$store.state.isVip||n.push({name:e.name,artist:e.singerName,url:this.$store.state.httpFileUrl+e.url,cover:e.pic,lrc:e.lyric})}));let o={status:1,song:n};this.$store.state.songList=o,e.isplay||this.isSongListPlay||(0,z.Hu)({id:e.id}).then((t=>{t.success&&(e.count+=1,e.isplay=!0,A.z8.success("播放成功"))}))}}))},initNum(e){return e>=1e4?(e/1e4).toFixed(2)+"w":e},init(){if(this.isPerson=!1,null!==localStorage.getItem("token")&&""!==localStorage.getItem("token")&&null!==localStorage.getItem("consumer")&&""!==localStorage.getItem("consumer")){let e=JSON.parse(localStorage.getItem("consumer"));this.consumerId+""===e.id+""&&(this.isPerson=!0),this.consumerId+""!==e.id+""&&(this.loginAndP=!0)}(0,z.H3)({id:this.consumerId}).then((e=>{e.success&&(this.songList=e.data)}))}},watch:{$route(e,t){e.query.id!==t.query.id&&(this.consumerId=e.query.id,this.init())}},created(){this.consumerId=this.$route.query.id,this.init()}},j=n(3744);const H=(0,j.Z)(F,[["render",x],["__scopeId","data-v-e64bcbe6"]]);var M=H}}]);
//# sourceMappingURL=216.8167377a.js.map