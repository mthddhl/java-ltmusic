(self["webpackChunkcli"]=self["webpackChunkcli"]||[]).push([[673],{5823:function(t){t.exports=function(t,e,n,s){var r="undefined"!==typeof s?[s,t]:[t],o=new Blob(r,{type:n||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(o,e);else{var i=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(o):window.webkitURL.createObjectURL(o),u=document.createElement("a");u.style.display="none",u.href=i,u.setAttribute("download",e),"undefined"===typeof u.download&&u.setAttribute("target","_blank"),document.body.appendChild(u),u.click(),setTimeout((function(){document.body.removeChild(u),window.URL.revokeObjectURL(i)}),200)}}},1626:function(t,e,n){"use strict";n.d(e,{aF:function(){return ot},MI:function(){return I},g9:function(){return y},CW:function(){return k},Ff:function(){return x},fl:function(){return f},H3:function(){return w},TG:function(){return E},Tb:function(){return p},Ml:function(){return W},YT:function(){return K},iZ:function(){return H},dy:function(){return M},sI:function(){return A},W:function(){return j},W_:function(){return m},A4:function(){return J},ct:function(){return Q},h7:function(){return v},uw:function(){return nt},JM:function(){return Z},V8:function(){return tt},Jd:function(){return $},V2:function(){return et},Gr:function(){return R},Fx:function(){return D},Si:function(){return T},n1:function(){return z},hb:function(){return g},Jb:function(){return q},_C:function(){return st},FO:function(){return b},cQ:function(){return O},TF:function(){return a},av:function(){return _},nM:function(){return V},o5:function(){return P},iA:function(){return G},WN:function(){return S},mT:function(){return rt},u9:function(){return Y},QK:function(){return X},Xv:function(){return F},l1:function(){return B},kL:function(){return U},VV:function(){return c},OD:function(){return h},Xt:function(){return L},Hu:function(){return d},A6:function(){return C},xB:function(){return l},nd:function(){return N}});var s=n(9669),r=n.n(s),o=(n(8341),n(5244));function i(t,e={}){return new Promise(((n,s)=>{r().get(t,{params:e,headers:{Authorization:localStorage.getItem("token")}}).then((t=>{n(t.data)})).catch((t=>{s(t)}))}))}function u(t,e={}){return new Promise(((n,s)=>{r().post(t,e,{headers:{Authorization:localStorage.getItem("token")}}).then((t=>{n(t.data)})).catch((t=>{s(t)}))}))}r().defaults.timeout=5e3,r().defaults.withCredentials=!0,r().defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",r().defaults.baseURL="http://192.168.0.105",r().interceptors.response.use((t=>200===t.status?Promise.resolve(t):Promise.reject(t)),(t=>{if(t.response.status){switch(t.response.status){case 401:localStorage.setItem("token",""),localStorage.setItem("consumer",""),o.z8.error(t.response.data.errorMsg);break;case 403:localStorage.setItem("token",""),localStorage.setItem("consumer",""),o.z8.error(t.response.data.errorMsg);break;case 404:break}return Promise.reject(t.response)}}));const a=()=>i("/songList/getPartSongList"),l=t=>i("/listSong/songforSongListGetAll",t),c=t=>i("/songList/songListGetById",t),g=t=>i("/songList/getLikeSongList",t),d=t=>i("/songList/songListGetSongsCountIncr",t),m=t=>i("/songList/consumerLikeSongList",t),p=t=>i("/songList/consumerGetLikeSingList",t),f=t=>i("songList/consumerDeleteLikeSongList",t),h=t=>i("/songList/songListGetByLetter",t),L=t=>i("/songList/songListGetCountByLetter",t),S=t=>i("/songList/getTogetLikedSongList",t),k=t=>u("/songList/consumerCreatedSongList",t),w=t=>i("/songList/consumerGetCreatedSongList",t),y=t=>i("/listSong/consumerAddSongToSongList",t),I=t=>i("/songList/consumerAddSongGetSongList",t),C=t=>u("/songList/songListUpdate",t),v=t=>i("/listSong/consumerUpdateSongListSongs",t),b=()=>i("/singer/getPartSinger"),U=t=>i("/song/getAllList",t),_=t=>i("/singer/getSingerById",t),$=t=>i("/song/getAllList",t),P=t=>i("/song/getSongPage",t),A=t=>i("/singer/consumerLikeSinger",t),W=t=>i("/singer/consumerGetLikeSinger",t),x=t=>i("/singer/consumerDeleteLikeSinger",t),F=t=>i("/singer/singerGetByLetter",t),B=t=>i("/singer/singerGetCountByLetter",t),z=t=>i("singer/getLikeSinger",t),G=t=>i("singer/getTogetLikedSingers",t),O=()=>i("/song/getPartSong"),V=t=>i("/song/getSongBySongListIdPage",t),j=t=>i("/song/consumerLikeSong",t),T=t=>i("/song/getConsumerLikeSong",t),N=t=>u("/songListComment/subComments",t),D=t=>i("/songListComment/getCommentsBySongListId",t),R=t=>i("/songListComment/getCommentCount",t),M=t=>i("/songListComment/likeOfConsumer",t),q=t=>u("/loginController/login",t),J=()=>i("/loginController/consumerLogout"),H=()=>i("/loginController/consumerIsLogin"),E=t=>i("/consumer/consumerGetInfo",t),K=t=>u("/consumer/consumerInsert",t),Q=t=>u("/consumer/consumerUpdate",t),X=t=>i("/search/searchGetAll",t),Y=t=>i("/search/searchContent",t),Z=t=>i("/search/fileIsExist",t),tt=()=>i("/carousel/getAllCarousel"),et=()=>i("/product/getAllVIPProduct"),nt=t=>i("/aliPayApi/createdOrder",t),st=()=>i("/order/getOrderByConId"),rt=t=>i("/order/payOrderByOrderNo",t),ot=t=>i("/order/closeOrderByOrderNo",t)},3707:function(t,e,n){"use strict";n.d(e,{j:function(){return l}});var s=n(5244),r=n(1626),o=n(9669),i=n.n(o),u=n(5823),a=n.n(u);const l={methods:{addAlong(t){if(t.isVip&&!this.$store.state.isVip)return void s.z8.success("您不是会员，无法播放此歌曲");let e={status:3,name:t.name,song:{name:t.name,artist:t.singerName,url:this.$store.state.httpFileUrl+t.url,cover:this.$store.state.httpFileUrl+t.pic,lrc:t.lyric}};this.$store.state.songList=e},closeSong(t){let e={status:3,name:"",song:{name:t.name,artist:t.singerName,url:this.$store.state.httpFileUrl+t.url,cover:this.$store.state.httpFileUrl+t.pic}};this.$store.state.songList=e},addSong(t){if(t.isVip&&!this.$store.state.isVip)return void s.z8.success("您不是会员，无法播放此歌曲");let e={status:0,songAlone:{name:t.name,artist:t.singerName,url:this.$store.state.httpFileUrl+t.url,cover:this.$store.state.httpFileUrl+t.pic,lrc:t.lyric}};this.$store.state.songList=e},downloadSong(t){!t.isVip||this.$store.state.isVip?(0,r.JM)({url:t.url}).then((e=>{e.success?(s.z8.success("正在下载"),t.isDownLoad=!0,i().get(this.$store.state.httpFileUrl+t.url,{timeout:5e7,responseType:"blob",headers:{"Content-Type":"application/octet-stream"},onDownloadProgress:function(e){t.isDownLoadNum=(e.loaded/e.total*100).toFixed(2)}}).then((e=>{a()(e.data,t.name+".mp3")}))):s.z8.error(e.errorMsg)})):s.z8.success("您不是会员无法下载此歌曲")},singerPlay(t){(0,r.kL)({singerId:t}).then((t=>{if(t.success){if(0===t.data.length)return void s.z8.error("歌手无歌曲");let e=[];t.data.forEach((t=>{t.isVip&&!this.$store.state.isVip||e.push({name:t.name,artist:t.singerName,url:this.$store.state.httpFileUrl+t.url,cover:this.$store.state.httpFileUrl+t.pic,lrc:t.lyric})}));let n={status:1,song:e};this.$store.state.songList=n}}))},songListPlay(t){(0,r.xB)({songListId:t.id}).then((e=>{if(e.success){let n=[];e.data.forEach((t=>{t.isVip&&!this.$store.state.isVip||n.push({name:t.name,artist:t.singer,url:this.$store.state.httpFileUrl+t.url,cover:this.$store.state.httpFileUrl+t.pic,lrc:t.lyric})}));let o={status:2,song:n};this.$store.state.songList=o,t.isplay||this.isSongListPlay||(0,r.Hu)({id:t.id}).then((e=>{e.success&&(t.count+=1,t.isplay=!0,s.z8.success("播放成功"))}))}}))}}}},9673:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return v}});var s=n(6252),r=n(3577);const o=t=>((0,s.dD)("data-v-4c6a4199"),t=t(),(0,s.Cn)(),t),i={class:"space"},u={style:{"margin-left":"10px","margin-top":"10px"}},a=(0,s.Uk)("全部"),l=(0,s.Uk)("共同关注"),c=["onClick"],g={class:"content"},d={class:"count"},m=(0,s.Uk)("播放"),p=(0,s.Uk)("取消收藏"),f=o((()=>(0,s._)("div",{style:{height:"15px"}},null,-1))),h={style:{color:"#000000"}};function L(t,e,n,o,L,S){const k=(0,s.up)("CaretBottom"),w=(0,s.up)("el-icon"),y=(0,s.up)("el-divider"),I=(0,s.up)("Headset"),C=(0,s.up)("el-col"),v=(0,s.up)("MoreFilled"),b=(0,s.up)("el-dropdown-item"),U=(0,s.up)("el-dropdown-menu"),_=(0,s.up)("el-dropdown"),$=(0,s.up)("el-row"),P=(0,s.up)("el-space");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",u,[(0,s._)("span",{class:"allLike",style:(0,r.j5)("全部"===this.currentState?L.type:""),onClick:e[0]||(e[0]=(...t)=>S.getAll&&S.getAll(...t))},[a,(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(k)])),_:1})],4),L.loginAndP?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"togetLike",style:(0,r.j5)("共同关注"===this.currentState?L.type:""),onClick:e[1]||(e[1]=(...t)=>S.togetLike&&S.togetLike(...t))},[l,(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(k)])),_:1})],4)):(0,s.kq)("",!0)]),(0,s.Wm)(y,{style:{"margin-top":"1px","margin-bottom":"15px",width:"95%","margin-left":"-5px","background-color":"#51626e"}}),(0,s.Wm)(P,{fill:!1,wrap:"","fill-ratio":50,size:40},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(L.songList,((e,n)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"box-card"},[(0,s._)("div",{class:"box",style:(0,r.j5)({backgroundImage:`url(${this.$store.state.httpFileUrl+e.pic})`})},[(0,s._)("div",{class:"link",onClick:t=>S.jump(e.id)},null,8,c),(0,s._)("div",g,[(0,s.Wm)($,null,{default:(0,s.w5)((()=>[(0,s.Wm)(C,{span:4},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{class:"headset"},{default:(0,s.w5)((()=>[(0,s.Wm)(I)])),_:1})])),_:1}),(0,s.Wm)(C,{span:17,style:{"margin-top":"4px","margin-left":"-5px"}},{default:(0,s.w5)((()=>[(0,s._)("span",d,(0,r.zw)(S.initNum(e.count)),1)])),_:2},1024),(0,s.Wm)(C,{span:3,style:{"margin-top":"8px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{trigger:"click"},{dropdown:(0,s.w5)((()=>[(0,s.Wm)(U,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,{onClick:n=>t.songListPlay(e)},{default:(0,s.w5)((()=>[m])),_:2},1032,["onClick"]),this.isPerson?((0,s.wg)(),(0,s.j4)(b,{key:0,onClick:t=>S.deleteLike(e,n)},{default:(0,s.w5)((()=>[p])),_:2},1032,["onClick"])):(0,s.kq)("",!0)])),_:2},1024)])),default:(0,s.w5)((()=>[(0,s.Wm)(w,{class:"playIcon"},{default:(0,s.w5)((()=>[(0,s.Wm)(v)])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024)])],4),f,(0,s._)("div",null,[(0,s._)("span",h,(0,r.zw)(e.title),1)])])))),128))])),_:1})])}var S=n(1626),k=n(5244),w=n(3707),y={name:"",mixins:[w.j],data(){return{songList:[],consumerId:-1,isPerson:!1,loginAndP:!1,currentState:"全部",type:{color:"rgba(255,0,0,0.97)"}}},methods:{jump(t){this.$router.push({path:"/songList",query:{id:t}})},deleteLike(t,e){let n=t.id;(0,S.fl)({id:n}).then((t=>{t.success?(k.z8.success("取消收藏成功"),this.songList.splice(e,1)):k.z8.error(t.data)}))},getAll(){this.currentState="全部",(0,S.Tb)({id:this.consumerId}).then((t=>{t.success&&(this.songList=t.data)}))},togetLike(){this.currentState="共同关注",(0,S.WN)({id:this.consumerId}).then((t=>{t.success&&(this.songList=t.data)}))},initNum(t){return null===t?0:t>=1e4?(t/1e4).toFixed(2)+"w":t},init(){if(this.isPerson=!1,null!==localStorage.getItem("token")&&""!==localStorage.getItem("token")&&null!==localStorage.getItem("consumer")&&""!==localStorage.getItem("consumer")){let t=JSON.parse(localStorage.getItem("consumer"));this.consumerId+""===t.id+""&&(this.isPerson=!0)}if(null!==localStorage.getItem("token")&&""!==localStorage.getItem("token")&&null!==localStorage.getItem("consumer")&&""!==localStorage.getItem("consumer")){let t=JSON.parse(localStorage.getItem("consumer"));this.consumerId+""!==t.id+""&&(this.loginAndP=!0)}(0,S.Tb)({id:this.consumerId}).then((t=>{t.success&&(this.songList=t.data)}))}},watch:{$route(t,e){t.query.id!==e.query.id&&(this.consumerId=t.query.id,this.init())}},created(){this.consumerId=this.$route.query.id,this.init()}},I=n(3744);const C=(0,I.Z)(y,[["render",L],["__scopeId","data-v-4c6a4199"]]);var v=C}}]);
//# sourceMappingURL=673.afbe2382.js.map