(self["webpackChunkcli"]=self["webpackChunkcli"]||[]).push([[301],{5823:function(e){e.exports=function(e,t,n,o){var s="undefined"!==typeof o?[o,e]:[e],r=new Blob(s,{type:n||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(r,t);else{var i=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(r):window.webkitURL.createObjectURL(r),a=document.createElement("a");a.style.display="none",a.href=i,a.setAttribute("download",t),"undefined"===typeof a.download&&a.setAttribute("target","_blank"),document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(i)}),200)}}},1626:function(e,t,n){"use strict";n.d(t,{aF:function(){return re},MI:function(){return I},g9:function(){return y},CW:function(){return w},Ff:function(){return D},fl:function(){return p},H3:function(){return k},TG:function(){return E},Tb:function(){return h},Ml:function(){return $},YT:function(){return K},iZ:function(){return H},dy:function(){return j},sI:function(){return A},W:function(){return N},W_:function(){return m},A4:function(){return J},ct:function(){return Q},h7:function(){return b},uw:function(){return ne},JM:function(){return Y},V8:function(){return ee},Jd:function(){return U},V2:function(){return te},Gr:function(){return R},Fx:function(){return M},Si:function(){return O},n1:function(){return F},hb:function(){return d},Jb:function(){return q},_C:function(){return oe},FO:function(){return v},cQ:function(){return T},TF:function(){return l},av:function(){return W},nM:function(){return G},o5:function(){return _},iA:function(){return B},WN:function(){return S},mT:function(){return se},u9:function(){return Z},QK:function(){return X},Xv:function(){return z},l1:function(){return V},kL:function(){return P},VV:function(){return c},OD:function(){return f},Xt:function(){return L},Hu:function(){return g},A6:function(){return C},xB:function(){return u},nd:function(){return x}});var o=n(9669),s=n.n(o),r=(n(8341),n(5244));function i(e,t={}){return new Promise(((n,o)=>{s().get(e,{params:t,headers:{Authorization:localStorage.getItem("token")}}).then((e=>{n(e.data)})).catch((e=>{o(e)}))}))}function a(e,t={}){return new Promise(((n,o)=>{s().post(e,t,{headers:{Authorization:localStorage.getItem("token")}}).then((e=>{n(e.data)})).catch((e=>{o(e)}))}))}s().defaults.timeout=5e3,s().defaults.withCredentials=!0,s().defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",s().defaults.baseURL="http://192.168.0.105",s().interceptors.response.use((e=>200===e.status?Promise.resolve(e):Promise.reject(e)),(e=>{if(e.response.status){switch(e.response.status){case 401:localStorage.setItem("token",""),localStorage.setItem("consumer",""),r.z8.error(e.response.data.errorMsg);break;case 403:localStorage.setItem("token",""),localStorage.setItem("consumer",""),r.z8.error(e.response.data.errorMsg);break;case 404:break}return Promise.reject(e.response)}}));const l=()=>i("/songList/getPartSongList"),u=e=>i("/listSong/songforSongListGetAll",e),c=e=>i("/songList/songListGetById",e),d=e=>i("/songList/getLikeSongList",e),g=e=>i("/songList/songListGetSongsCountIncr",e),m=e=>i("/songList/consumerLikeSongList",e),h=e=>i("/songList/consumerGetLikeSingList",e),p=e=>i("songList/consumerDeleteLikeSongList",e),f=e=>i("/songList/songListGetByLetter",e),L=e=>i("/songList/songListGetCountByLetter",e),S=e=>i("/songList/getTogetLikedSongList",e),w=e=>a("/songList/consumerCreatedSongList",e),k=e=>i("/songList/consumerGetCreatedSongList",e),y=e=>i("/listSong/consumerAddSongToSongList",e),I=e=>i("/songList/consumerAddSongGetSongList",e),C=e=>a("/songList/songListUpdate",e),b=e=>i("/listSong/consumerUpdateSongListSongs",e),v=()=>i("/singer/getPartSinger"),P=e=>i("/song/getAllList",e),W=e=>i("/singer/getSingerById",e),U=e=>i("/song/getAllList",e),_=e=>i("/song/getSongPage",e),A=e=>i("/singer/consumerLikeSinger",e),$=e=>i("/singer/consumerGetLikeSinger",e),D=e=>i("/singer/consumerDeleteLikeSinger",e),z=e=>i("/singer/singerGetByLetter",e),V=e=>i("/singer/singerGetCountByLetter",e),F=e=>i("singer/getLikeSinger",e),B=e=>i("singer/getTogetLikedSingers",e),T=()=>i("/song/getPartSong"),G=e=>i("/song/getSongBySongListIdPage",e),N=e=>i("/song/consumerLikeSong",e),O=e=>i("/song/getConsumerLikeSong",e),x=e=>a("/songListComment/subComments",e),M=e=>i("/songListComment/getCommentsBySongListId",e),R=e=>i("/songListComment/getCommentCount",e),j=e=>i("/songListComment/likeOfConsumer",e),q=e=>a("/loginController/login",e),J=()=>i("/loginController/consumerLogout"),H=()=>i("/loginController/consumerIsLogin"),E=e=>i("/consumer/consumerGetInfo",e),K=e=>a("/consumer/consumerInsert",e),Q=e=>a("/consumer/consumerUpdate",e),X=e=>i("/search/searchGetAll",e),Z=e=>i("/search/searchContent",e),Y=e=>i("/search/fileIsExist",e),ee=()=>i("/carousel/getAllCarousel"),te=()=>i("/product/getAllVIPProduct"),ne=e=>i("/aliPayApi/createdOrder",e),oe=()=>i("/order/getOrderByConId"),se=e=>i("/order/payOrderByOrderNo",e),re=e=>i("/order/closeOrderByOrderNo",e)},3707:function(e,t,n){"use strict";n.d(t,{j:function(){return u}});var o=n(5244),s=n(1626),r=n(9669),i=n.n(r),a=n(5823),l=n.n(a);const u={methods:{addAlong(e){if(e.isVip&&!this.$store.state.isVip)return void o.z8.success("您不是会员，无法播放此歌曲");let t={status:3,name:e.name,song:{name:e.name,artist:e.singerName,url:this.$store.state.httpFileUrl+e.url,cover:this.$store.state.httpFileUrl+e.pic,lrc:e.lyric}};this.$store.state.songList=t},closeSong(e){let t={status:3,name:"",song:{name:e.name,artist:e.singerName,url:this.$store.state.httpFileUrl+e.url,cover:this.$store.state.httpFileUrl+e.pic}};this.$store.state.songList=t},addSong(e){if(e.isVip&&!this.$store.state.isVip)return void o.z8.success("您不是会员，无法播放此歌曲");let t={status:0,songAlone:{name:e.name,artist:e.singerName,url:this.$store.state.httpFileUrl+e.url,cover:this.$store.state.httpFileUrl+e.pic,lrc:e.lyric}};this.$store.state.songList=t},downloadSong(e){!e.isVip||this.$store.state.isVip?(0,s.JM)({url:e.url}).then((t=>{t.success?(o.z8.success("正在下载"),e.isDownLoad=!0,i().get(this.$store.state.httpFileUrl+e.url,{timeout:5e7,responseType:"blob",headers:{"Content-Type":"application/octet-stream"},onDownloadProgress:function(t){e.isDownLoadNum=(t.loaded/t.total*100).toFixed(2)}}).then((t=>{l()(t.data,e.name+".mp3")}))):o.z8.error(t.errorMsg)})):o.z8.success("您不是会员无法下载此歌曲")},singerPlay(e){(0,s.kL)({singerId:e}).then((e=>{if(e.success){if(0===e.data.length)return void o.z8.error("歌手无歌曲");let t=[];e.data.forEach((e=>{e.isVip&&!this.$store.state.isVip||t.push({name:e.name,artist:e.singerName,url:this.$store.state.httpFileUrl+e.url,cover:this.$store.state.httpFileUrl+e.pic,lrc:e.lyric})}));let n={status:1,song:t};this.$store.state.songList=n}}))},songListPlay(e){(0,s.xB)({songListId:e.id}).then((t=>{if(t.success){let n=[];t.data.forEach((e=>{e.isVip&&!this.$store.state.isVip||n.push({name:e.name,artist:e.singer,url:this.$store.state.httpFileUrl+e.url,cover:this.$store.state.httpFileUrl+e.pic,lrc:e.lyric})}));let r={status:2,song:n};this.$store.state.songList=r,e.isplay||this.isSongListPlay||(0,s.Hu)({id:e.id}).then((t=>{t.success&&(e.count+=1,e.isplay=!0,o.z8.success("播放成功"))}))}}))}}}},8301:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var o=n(6252),s=n(3577);const r={class:"space"},i={style:{cursor:"pointer"}},a=["onMouseover"],l={key:0},u={key:1},c=["onClick"],d=["onClick"],g=["onClick"],m={class:"dialog-footer"},h=(0,o.Uk)("取消"),p=(0,o.Uk)("确定");function f(e,t,n,f,L,S){const w=(0,o.up)("el-table-column"),k=(0,o.up)("VideoPause"),y=(0,o.up)("el-icon"),I=(0,o.up)("VideoPlay"),C=(0,o.up)("Plus"),b=(0,o.up)("el-tooltip"),v=(0,o.up)("IconHeartFill"),P=(0,o.up)("IconHeart"),W=(0,o.up)("Download"),U=(0,o.up)("FirstAidKit"),_=(0,o.up)("el-progress"),A=(0,o.up)("el-table"),$=(0,o.up)("el-button"),D=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(A,{data:L.tableData,style:{width:"100%","margin-top":"20px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{width:"50",align:"center",type:"selection",onSelectionChange:S.handleSelectChange},null,8,["onSelectionChange"]),(0,o.Wm)(w,{width:"38"},{default:(0,o.w5)((t=>[(0,o._)("div",i,[3===L.isPlay.status&&L.isPlay.name===t.row.name?((0,o.wg)(),(0,o.j4)(y,{key:0,onClick:e.closeSong,class:"iconPlay"},{default:(0,o.w5)((()=>[(0,o.Wm)(k)])),_:1},8,["onClick"])):((0,o.wg)(),(0,o.j4)(y,{key:1,onClick:n=>e.addAlong(t.row),class:"iconPlay"},{default:(0,o.w5)((()=>[(0,o.Wm)(I)])),_:2},1032,["onClick"]))])])),_:1}),(0,o.Wm)(w,{prop:"name",label:"歌曲姓名",width:"250"}),(0,o.Wm)(w,{width:"200",label:"时长"},{default:(0,o.w5)((n=>[(0,o._)("div",{onMouseover:e=>L.showDetails=n.row.name,onMouseleave:t[0]||(t[0]=e=>L.showDetails="")},[L.showDetails!=n.row.name?((0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("span",null,(0,s.zw)(n.row.songTime),1)])):L.showDetails===n.row.name?((0,o.wg)(),(0,o.iD)("div",u,[(0,o.Wm)(b,{class:"box-item",effect:"dark",content:"添加到播放列表",placement:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"icon",onClick:t=>e.addSong(n.row)},{default:(0,o.w5)((()=>[(0,o.Wm)(C)])),_:2},1032,["onClick"])])),_:2},1024),(0,o.Wm)(b,{class:"box-item",effect:"dark",content:"收藏",placement:"top"},{default:(0,o.w5)((()=>[n.row.liked?((0,o.wg)(),(0,o.iD)("span",{key:0,onClick:e=>S.likeSong(n)},[(0,o.Wm)(v,{class:"icon",style:{color:"#f53f3f"}})],8,c)):((0,o.wg)(),(0,o.iD)("span",{key:1,onClick:e=>S.likeSong(n)},[(0,o.Wm)(P,{class:"icon"})],8,d))])),_:2},1024),(0,o.Wm)(b,{class:"box-item",effect:"dark",content:"下载",placement:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"icon",onClick:t=>e.downloadSong(n.row)},{default:(0,o.w5)((()=>[(0,o.Wm)(W)])),_:2},1032,["onClick"])])),_:2},1024),(0,o.Wm)(b,{class:"box-item",effect:"dark",content:"添加到歌单",placement:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"icon",onClick:e=>S.addToSongList(n.row)},{default:(0,o.w5)((()=>[(0,o.Wm)(U)])),_:2},1032,["onClick"])])),_:2},1024)])):(0,o.kq)("",!0)],40,a)])),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((e=>[(0,o._)("div",{style:{cursor:"pointer"},onClick:t=>S.toSinger(e)},[(0,o._)("span",null,(0,s.zw)(e.row.singerName),1)],8,g)])),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((e=>[e.row.isDownLoad?((0,o.wg)(),(0,o.j4)(_,{key:0,percentage:e.row.isDownLoadNum},null,8,["percentage"])):(0,o.kq)("",!0)])),_:1})])),_:1},8,["data"]),(0,o.Wm)(D,{modelValue:L.isAddSongList,"onUpdate:modelValue":t[2]||(t[2]=e=>L.isAddSongList=e),title:"Tips",width:"50%"},{footer:(0,o.w5)((()=>[(0,o._)("span",m,[(0,o.Wm)($,{onClick:t[1]||(t[1]=e=>L.isAddSongList=!1)},{default:(0,o.w5)((()=>[h])),_:1}),(0,o.Wm)($,{type:"primary",onClick:S.addSubmit},{default:(0,o.w5)((()=>[p])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(A,{data:L.songListName,style:{width:"100%"},onSelectionChange:S.handleSelectChange1},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{prop:"title",label:"歌单标题",width:"330"}),(0,o.Wm)(w,{width:"50",align:"center",type:"selection"})])),_:1},8,["data","onSelectionChange"])])),_:1},8,["modelValue"])])}var L=n(1626),S=n(5244),w=(n(9669),n(5823),n(3707)),k={name:"",mixins:[w.j],data(){return{isPerson:!1,showDetails:"",isPlay:{status:-1,name:"",song:{}},tableData:[],consumerId:-1,currentPage:1,pageSize:2,isAddSongList:!1,addSongId:-1,songListName:[],addSongListIds:[]}},methods:{toSinger(e){let t=e.row.singerId;this.$router.push({path:"/singer",query:{id:t}})},handleSelectChange(){},handleSelectChange1(e){this.addSongListIds=[],e.map((e=>{this.addSongListIds.push(e.id)}))},addToSongList(e){if(this.addSongId=e.id,null===localStorage.getItem("token")||""===localStorage.getItem("token"))return void S.z8.error("未登录，无法添加到歌单");if(null===localStorage.getItem("consumer")||""===localStorage.getItem("consumer"))return void S.z8.error("未登录，无法添加到歌单");{let e=JSON.parse(localStorage.getItem("consumer"));this.consumerId=e.id}let t=new URLSearchParams;t.append("consumerId",this.consumerId),t.append("songId",this.addSongId),(0,L.MI)(t).then((e=>{this.songListName=e.data})),this.isAddSongList=!0},addSubmit(){if(0===this.addSongListIds.length)return void S.z8.error("未选择歌单");let e=new URLSearchParams;e.append("songId",this.addSongId),e.append("songListIds",this.addSongListIds),(0,L.g9)(e).then((e=>{e.success?S.z8.success(e.data):S.z8.error(e.errorMsg)})),this.addSongListIds=[],this.isAddSongList=!1},likeSong(e){if((null===localStorage.getItem("token")||""===localStorage.getItem("token"))&&(null===localStorage.getItem("consumer")||""===localStorage.getItem("consumer")))return void S.z8.error("您还未登录，无法收藏");let t=new URLSearchParams,n=e.row.id;t.append("songId",n),t.append("isLiked",e.row.liked),(0,L.W)(t).then((t=>{t.success?(this.isPerson&&e.row.liked&&this.tableData.splice(e.$index,1),e.row.liked=!e.row.liked,S.z8.success(t.data)):S.z8.error(t.errorMsg)}))},init(){if(null!==localStorage.getItem("token")&&""!==localStorage.getItem("token")&&null!==localStorage.getItem("consumer")&&""!==localStorage.getItem("consumer")){let e=JSON.parse(localStorage.getItem("consumer"));this.consumerId+""===e.id+""&&(this.isPerson=!0)}(0,L.Si)({id:this.consumerId}).then((e=>{e.success&&(this.tableData=e.data)}))}},watch:{"$store.state.songList":{handler(e,t){this.isPlay=e}},$route(e,t){e.query.id!==t.query.id&&(this.consumerId=e.query.id,this.init())}},created(){this.consumerId=this.$route.query.id,this.init()}},y=n(3744);const I=(0,y.Z)(k,[["render",f],["__scopeId","data-v-5e4e80eb"]]);var C=I}}]);
//# sourceMappingURL=301.0986bf37.js.map