"use strict";(self["webpackChunkcli"]=self["webpackChunkcli"]||[]).push([[439],{6245:function(e,t,o){function n(e){this.message=e}n.prototype=new Error,n.prototype.name="InvalidCharacterError";var r="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,r,a=0,l=0,s="";r=t.charAt(l++);~r&&(o=a%4?64*o+r:r,a++%4)?s+=String.fromCharCode(255&o>>(-2*a&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return s};function a(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,(function(e,t){var o=t.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o})))}(t)}catch(e){return r(t)}}function l(e){this.message=e}function s(e,t){if("string"!=typeof e)throw new l("Invalid token specified");var o=!0===(t=t||{}).header?0:1;try{return JSON.parse(a(e.split(".")[o]))}catch(e){throw new l("Invalid token specified: "+e.message)}}l.prototype=new Error,l.prototype.name="InvalidTokenError",t["Z"]=s},1439:function(e,t,o){o.r(t),o.d(t,{default:function(){return H}});var n=o(6252);const r={style:{border:"1px solid #000000"}},a=(0,n._)("br",null,null,-1),l=(0,n._)("br",null,null,-1),s=(0,n._)("br",null,null,-1),u=(0,n._)("br",null,null,-1),i=(0,n._)("br",null,null,-1),d=(0,n._)("br",null,null,-1),c=(0,n._)("br",null,null,-1),m=(0,n._)("br",null,null,-1),p=(0,n._)("br",null,null,-1);function h(e,t,o,h,f,g){const w=(0,n.up)("consumer-info"),U=(0,n.up)("Meun"),b=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(w),(0,n.Wm)(U,{"consumer-id":f.consumerId},null,8,["consumer-id"]),(0,n.Wm)(b),a,l,s,u,i,d,c,m,p])}var f=o(3577);function g(e,t,o,r,a,l){const s=(0,n.up)("el-menu-item"),u=(0,n.up)("el-menu");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(u,{"default-active":l.activeIndex,class:"el-menu-demo",mode:"horizontal",onSelect:l.handleSelect},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.meun,(e=>((0,n.wg)(),(0,n.j4)(s,{index:e.index,key:e.index,class:"menu"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,f.zw)(e.name),1)])),_:2},1032,["index"])))),128))])),_:1},8,["default-active","onSelect"])])}var w={name:"",props:{consumerId:Number},data(){return{meun:[{index:"/personal/LikeSingList",name:"收藏的歌单"},{index:"/personal/LikeSongs",name:"关注的歌曲"},{index:"/personal/LikeSinger",name:"喜欢的歌手"},{index:"/personal/ConsumerCreatedSongList",name:"创建的歌单"}]}},methods:{handleSelect(e,t){let o=this.consumerId;this.$router.push({path:e,query:{id:o}})}},computed:{activeIndex(){return this.$route.path.replace("//","")}}},U=o(3744);const b=(0,U.Z)(w,[["render",g],["__scopeId","data-v-1caf3bc4"]]);var y=b;const _=e=>((0,n.dD)("data-v-fbff8e04"),e=e(),(0,n.Cn)(),e),k={class:"information"},v={class:"content"},x={style:{"margin-left":"10px"}},I={style:{"font-family":"微软雅黑","font-size":"22px"}},W={style:{"margin-top":"20px"}},S={class:"created"},V={style:{"margin-left":"10px"}},z={style:{}},C={style:{"margin-top":"20px","margin-left":"10px",color:"black"}},q={style:{"margin-top":"20px","margin-left":"10px",color:"black"}},N=_((()=>(0,n._)("br",null,null,-1))),$=_((()=>(0,n._)("br",null,null,-1))),D={style:{"margin-top":"20px","margin-left":"10px","margin-right":"10px"}},T=(0,n.Uk)(" 介绍："),M={style:{"word-break":"break-all"}},E={class:"registerBtn"},A=(0,n.Uk)("更新"),L=(0,n.Uk)("取消");function P(e,t,o,r,a,l){const s=(0,n.up)("el-avatar"),u=(0,n.up)("el-tooltip"),i=(0,n.up)("el-upload"),d=(0,n.up)("Location"),c=(0,n.up)("el-icon"),m=(0,n.up)("el-col"),p=(0,n.up)("el-row"),h=(0,n.up)("el-space"),g=(0,n.up)("Edit"),w=(0,n.up)("el-input"),U=(0,n.up)("el-form-item"),b=(0,n.up)("el-radio"),y=(0,n.up)("el-radio-group"),_=(0,n.up)("el-date-picker"),P=(0,n.up)("el-cascader"),j=(0,n.up)("el-form"),F=(0,n.up)("el-button"),O=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.iD)("div",k,[a.isPerson?((0,n.wg)(),(0,n.j4)(i,{key:0,"show-file-list":!1,class:"upload-demo",action:l.changeAvator(a.consumerId),"before-upload":l.checkFile,"on-success":l.uploadSuccess,"on-error":l.uploadError,limit:"1",style:{width:"400px",float:"left"}},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{class:"box-item",effect:"dark",content:"更换头像",placement:"left-start",style:{cursor:"pointer"},onClick:t[0]||(t[0]=e=>l.changeAvator(a.consumerId))},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{size:160,src:this.$store.state.httpFileUrl+a.consumer.avator,class:"img"},null,8,["src"])])),_:1})])),_:1},8,["action","before-upload","on-success","on-error"])):(0,n.kq)("",!0),a.isPerson?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(s,{key:1,size:160,src:this.$store.state.httpFileUrl+a.consumer.avator,class:"img"},null,8,["src"])),(0,n._)("div",v,[(0,n._)("div",x,[(0,n._)("span",I,(0,f.zw)(a.consumer.username),1)]),(0,n._)("div",W,[(0,n._)("div",S,[(0,n.Wm)(c,{style:{transform:"scale(1.5)",float:"left"}},{default:(0,n.w5)((()=>[(0,n.Wm)(d)])),_:1}),(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,{span:10},{default:(0,n.w5)((()=>[(0,n._)("span",V,(0,f.zw)(a.consumer.location),1)])),_:1}),(0,n.Wm)(m,{span:10},{default:(0,n.w5)((()=>[(0,n._)("span",z,(0,f.zw)(a.consumer.birth),1)])),_:1})])),_:1})])]),(0,n._)("div",C,[(0,n.Wm)(h,{fill:!1,wrap:"","fill-ratio":50,size:1,style:{"font-size":"15px"}},{default:(0,n.w5)((()=>[(0,n.Uk)(" 性别: "+(0,f.zw)(1===this.consumer.sex?"男":"女"),1)])),_:1})]),(0,n._)("div",q,[(0,n.Uk)(" 手机号："+(0,f.zw)(l.phoneNum)+" ",1),N,$,(0,n.Uk)(" 邮件："+(0,f.zw)(l.email),1)]),(0,n._)("div",D,[T,(0,n._)("span",M,(0,f.zw)(a.consumer.introduction),1)])]),(0,n._)("div",{style:{width:"200px",float:"left","margin-left":"-250px","margin-top":"10px",cursor:"pointer"},onClick:t[1]||(t[1]=(...e)=>l.showUpdate&&l.showUpdate(...e))},[a.isPerson?((0,n.wg)(),(0,n.j4)(u,{key:0,class:"box-item",effect:"dark",content:"修改信息",placement:"top-start"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{style:{transform:"scale(1.7)"}},{default:(0,n.w5)((()=>[(0,n.Wm)(g)])),_:1})])),_:1})):(0,n.kq)("",!0)]),(0,n.Wm)(O,{modelValue:a.isUpdate,"onUpdate:modelValue":t[11]||(t[11]=e=>a.isUpdate=e),title:"Tips",width:"30%"},{default:(0,n.w5)((()=>[(0,n.Wm)(j,{model:a.consumerUpdate,"label-width":"80px"},{default:(0,n.w5)((()=>[(0,n.Wm)(U,{label:"用户名",prop:"username"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{modelValue:a.consumerUpdate.username,"onUpdate:modelValue":t[2]||(t[2]=e=>a.consumerUpdate.username=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(U,{label:"密码",prop:"password"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{modelValue:a.consumerUpdate.password,"onUpdate:modelValue":t[3]||(t[3]=e=>a.consumerUpdate.password=e),type:"password"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(U,{label:"性别"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{modelValue:a.consumerUpdate.sex,"onUpdate:modelValue":t[4]||(t[4]=e=>a.consumerUpdate.sex=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{label:"女"}),(0,n.Wm)(b,{label:"男"})])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(U,{label:"邮箱",prop:"email"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{modelValue:a.consumerUpdate.email,"onUpdate:modelValue":t[5]||(t[5]=e=>a.consumerUpdate.email=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(U,{label:"手机号",prop:"phoneNum"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{modelValue:a.consumerUpdate.phoneNum,"onUpdate:modelValue":t[6]||(t[6]=e=>a.consumerUpdate.phoneNum=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(U,{label:"生日",prop:"birth"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{modelValue:a.consumerUpdate.birth,"onUpdate:modelValue":t[7]||(t[7]=e=>a.consumerUpdate.birth=e),type:"date",placeholder:"Pick a date",style:{width:"100%"}},null,8,["modelValue"])])),_:1}),(0,n.Wm)(U,{label:"地区",prop:"location"},{default:(0,n.w5)((()=>[(0,n.Wm)(P,{size:"large",options:a.options,modelValue:a.consumerUpdate.location,"onUpdate:modelValue":t[8]||(t[8]=e=>a.consumerUpdate.location=e)},null,8,["options","modelValue"])])),_:1}),(0,n.Wm)(U,{label:"介绍",prop:"introduction"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{modelValue:a.consumerUpdate.introduction,"onUpdate:modelValue":t[9]||(t[9]=e=>a.consumerUpdate.introduction=e),type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,n._)("div",E,[(0,n.Wm)(F,{type:"primary",onClick:l.update},{default:(0,n.w5)((()=>[A])),_:1},8,["onClick"]),(0,n.Wm)(F,{type:"primary",onClick:t[10]||(t[10]=e=>a.isUpdate=!1)},{default:(0,n.w5)((()=>[L])),_:1})])])),_:1},8,["modelValue"])])}var j=o(1626),F=o(5244),O=(o(6245),o(4204)),Z={name:"",data(){return{isUpdate:!1,isPerson:!1,options:O.provinceAndCityData,consumerId:-1,consumer:{avator:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",phoneNum:"1234567891",email:"132@qq.com",sex:1},consumerUpdate:{sex:"男"}}},computed:{phoneNum(){return this.consumer.phoneNum.substring(0,3)+"*****"+this.consumer.phoneNum.substring(8)},email(){return"******@"+this.consumer.email.split("@")[1]}},methods:{update(){let e=this.consumerUpdate.birth;if(e instanceof Date){let t=e.getFullYear(),o=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();this.consumerUpdate.birth=t+"-"+o+"-"+n}this.consumerUpdate.sex="男"===this.consumerUpdate.sex?1:0,"undefined"!==typeof this.consumerUpdate.location&&(this.consumerUpdate.location=O.CodeToText[this.consumerUpdate.location[0]]+","+O.CodeToText[this.consumerUpdate.location[1]]),(0,j.ct)(this.consumerUpdate).then((e=>{e.success?((0,j.TG)({id:this.consumerId}).then((e=>{e.success&&(this.consumer=e.data)})),F.z8.success(e.data)):F.z8.error(e.errorMsg)})),this.isUpdate=!1},showUpdate(){this.consumerUpdate.id=this.consumerId,this.consumerUpdate.username=this.consumer.username,this.consumerUpdate.sex=1===this.consumer.sex?"男":"女",this.consumerUpdate.email=this.consumer.email,this.consumerUpdate.phoneNum=this.consumer.phoneNum,this.consumerUpdate.birth=this.consumer.birth,this.consumerUpdate.introduction=this.consumer.introduction,this.isUpdate=!0},changeAvator(e){return null!==localStorage.getItem("token")&&""!==localStorage.getItem("token")||null!==localStorage.getItem("consumer")&&""!==localStorage.getItem("consumer")?this.$store.state.httpUrl+"/consumer/changeImg?id="+e:(F.z8.error("您还未登录，无法更换"),"")},uploadError(e){let t=JSON.parse(e.message);F.z8.error("上传失败,"+t.errorMsg),localStorage.setItem("token",""),localStorage.setItem("consumer","")},uploadSuccess(e,t){e.success?(F.z8.success("更新成功"),this.init()):F.z8.error(e.errorMsg)},checkFile(e){return"image/jpeg"===!e.type&&"image/png"===!e.type?(this.$notify.error("格式错误"),!1):e.size/1024/1024<2||(this.$notify.error("文件大小错误"),!1)},init(){if((0,j.TG)({id:this.consumerId}).then((e=>{e.success&&(this.consumer=e.data)})),null!==localStorage.getItem("token")&&""!==localStorage.getItem("token")&&null!==localStorage.getItem("consumer")&&""!==localStorage.getItem("consumer")){let e=JSON.parse(localStorage.getItem("consumer"));this.consumerId+""===e.id+""&&(this.isPerson=!0)}}},watch:{$route(e,t){e.query.id!==t.query.id&&(this.consumerId=e.query.id,this.init())}},created(){this.consumerId=this.$route.query.id,this.init()}};const J=(0,U.Z)(Z,[["render",P],["__scopeId","data-v-fbff8e04"]]);var G=J,Y={name:"",data(){return{consumerId:-1}},components:{Meun:y,ConsumerInfo:G},created(){this.consumerId=this.$route.query.id},watch:{$route(e,t){e.query.id!==t.query.id&&(this.consumerId=e.query.id)}}};const B=(0,U.Z)(Y,[["render",h]]);var H=B}}]);
//# sourceMappingURL=439.3d96f59c.js.map